"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[9613],{151:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>m,frontMatter:()=>t,metadata:()=>r,toc:()=>l});var i=a(4848),s=a(8453);const t={title:"Isaac ROS Package Template",sidebar_position:2},c="Isaac ROS Package Template",r={id:"templates/isaac_ros_template",title:"Isaac ROS Package Template",description:"Overview",source:"@site/docs/templates/isaac_ros_template.md",sourceDirName:"templates",slug:"/templates/isaac_ros_template",permalink:"/Humanoid-AI-Book/docs/templates/isaac_ros_template",draft:!1,unlisted:!1,editUrl:"https://github.com/abdullatifjaffrani/Humanoid-AI-Book/tree/main/docs/templates/isaac_ros_template.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Isaac ROS Package Template",sidebar_position:2}},o={},l=[{value:"Overview",id:"overview",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"Template Files",id:"template-files",level:2},{value:"package.xml",id:"packagexml",level:3},{value:"CMakeLists.txt",id:"cmakeliststxt",level:3},{value:"Example Accelerated Python Node",id:"example-accelerated-python-node",level:3},{value:"Isaac-Specific Launch File",id:"isaac-specific-launch-file",level:3},{value:"Isaac-Specific Configuration",id:"isaac-specific-configuration",level:2},{value:"Accelerated Parameters",id:"accelerated-parameters",level:3},{value:"GPU Monitoring Script",id:"gpu-monitoring-script",level:2},{value:"Usage Instructions",id:"usage-instructions",level:2},{value:"Isaac-Specific Best Practices",id:"isaac-specific-best-practices",level:2},{value:"Common Isaac Customizations",id:"common-isaac-customizations",level:2},{value:"For Different Applications",id:"for-different-applications",level:3},{value:"For Different Hardware",id:"for-different-hardware",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"isaac-ros-package-template",children:"Isaac ROS Package Template"}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This template provides a starting point for creating new Isaac ROS packages that leverage NVIDIA's hardware acceleration capabilities. It includes the basic structure, configuration files, and example nodes optimized for GPU-accelerated robotics applications."}),"\n",(0,i.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"isaac_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt              # Build configuration for C++ packages\n\u251c\u2500\u2500 package.xml                 # Package metadata and dependencies\n\u251c\u2500\u2500 setup.py                    # Build configuration for Python packages\n\u251c\u2500\u2500 setup.cfg                   # Installation configuration\n\u251c\u2500\u2500 isaac_robot_package/        # Python package directory\n\u2502   \u251c\u2500\u2500 __init__.py            # Python package initialization\n\u2502   \u251c\u2500\u2500 accelerated_node.py    # Example accelerated Python node\n\u2502   \u2514\u2500\u2500 gpu_processor.py       # Example GPU processor component\n\u251c\u2500\u2500 src/                       # C++ source files\n\u2502   \u251c\u2500\u2500 accelerated_node.cpp   # Example accelerated C++ node\n\u2502   \u2514\u2500\u2500 cuda_processor.cu      # Example CUDA kernel\n\u251c\u2500\u2500 include/isaac_robot_package/ # C++ header files\n\u2502   \u251c\u2500\u2500 accelerated_node.hpp   # Example accelerated node header\n\u2502   \u2514\u2500\u2500 cuda_processor.cuh     # Example CUDA header\n\u251c\u2500\u2500 launch/                    # Launch files\n\u2502   \u2514\u2500\u2500 accelerated_launch.py  # Example launch file with Isaac nodes\n\u251c\u2500\u2500 config/                    # Configuration files\n\u2502   \u251c\u2500\u2500 accelerated_params.yaml # Example accelerated parameters\n\u2502   \u2514\u2500\u2500 gpu_config.yaml        # GPU-specific configuration\n\u251c\u2500\u2500 isaac/                     # Isaac-specific files\n\u2502   \u251c\u2500\u2500 extensions/            # Isaac extension files\n\u2502   \u2514\u2500\u2500 schemas/               # Isaac schema definitions\n\u251c\u2500\u2500 test/                      # Test files\n\u2502   \u251c\u2500\u2500 test_accelerated.py    # Example accelerated test\n\u2502   \u2514\u2500\u2500 test_gpu.cpp           # Example GPU test\n\u2514\u2500\u2500 scripts/                   # Utility scripts\n    \u2514\u2500\u2500 gpu_monitor.sh         # GPU monitoring script\n"})}),"\n",(0,i.jsx)(n.h2,{id:"template-files",children:"Template Files"}),"\n",(0,i.jsx)(n.h3,{id:"packagexml",children:"package.xml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>isaac_robot_package</name>\n  <version>0.0.0</version>\n  <description>Isaac Robot Package with GPU Acceleration</description>\n  <maintainer email="maintainer@todo.todo">Maintainer Name</maintainer>\n  <license>TODO License Declaration</license>\n\n  <buildtool_depend>ament_cmake</buildtool_depend>\n  <buildtool_depend>ament_python</buildtool_depend>\n\n  \x3c!-- Standard ROS 2 dependencies --\x3e\n  <depend>rclpy</depend>\n  <depend>rclcpp</depend>\n  <depend>std_msgs</depend>\n  <depend>geometry_msgs</depend>\n  <depend>sensor_msgs</depend>\n  <depend>nav_msgs</depend>\n\n  \x3c!-- Isaac ROS dependencies --\x3e\n  <depend>isaac_ros_common</depend>\n  <depend>isaac_ros_visual_slam</depend>\n  <depend>isaac_ros_apriltag</depend>\n  <depend>isaac_ros_pointcloud_utils</depend>\n\n  \x3c!-- GPU-related dependencies --\x3e\n  <depend>cuda_dev_tools</depend>\n\n  <test_depend>ament_lint_auto</test_depend>\n  <test_depend>ament_lint_common</test_depend>\n\n  <export>\n    <build_type>ament_cmake</build_type>\n  </export>\n</package>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cmakeliststxt",children:"CMakeLists.txt"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:'cmake_minimum_required(VERSION 3.8)\nproject(isaac_robot_package)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\n# Find dependencies\nfind_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(rclpy REQUIRED)\nfind_package(std_msgs REQUIRED)\nfind_package(geometry_msgs REQUIRED)\nfind_package(sensor_msgs REQUIRED)\nfind_package(nav_msgs REQUIRED)\n\n# Find Isaac ROS packages\nfind_package(isaac_ros_common REQUIRED)\nfind_package(isaac_ros_visual_slam REQUIRED)\nfind_package(isaac_ros_apriltag REQUIRED)\n\n# Find CUDA\nfind_package(CUDA REQUIRED)\n\n# Enable CUDA\nenable_language(CUDA)\n\n# Include directories\ninclude_directories(include)\n\n# Example accelerated C++ executable\nadd_executable(accelerated_node\n  src/accelerated_node.cpp\n  src/cuda_processor.cu\n)\ntarget_include_directories(accelerated_node PRIVATE ${CUDA_INCLUDE_DIRS})\ntarget_link_libraries(accelerated_node ${CUDA_LIBRARIES})\n\n# Link Isaac ROS libraries\nament_target_dependencies(accelerated_node\n  rclcpp\n  std_msgs\n  geometry_msgs\n  sensor_msgs\n  nav_msgs\n)\n\n# Install targets\ninstall(TARGETS\n  accelerated_node\n  DESTINATION lib/${PROJECT_NAME}\n)\n\n# Install Python modules\nament_python_install_package(${PROJECT_NAME})\n\n# Install launch files\ninstall(DIRECTORY\n  launch\n  config\n  isaac\n  DESTINATION share/${PROJECT_NAME}/\n)\n\nif(BUILD_TESTING)\n  find_package(ament_lint_auto REQUIRED)\n  set(ament_cmake_copyright_FOUND TRUE)\n  set(ament_cmake_flake8_FOUND TRUE)\n  set(ament_cmake_pep257_FOUND TRUE)\n  ament_lint_auto_find_test_dependencies()\nendif()\n\nament_package()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-accelerated-python-node",children:"Example Accelerated Python Node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import Image, CameraInfo\nfrom geometry_msgs.msg import Twist\nfrom std_msgs.msg import Float32\nimport numpy as np\nimport cv2\nfrom cv_bridge import CvBridge\nimport time\n\n\nclass IsaacAcceleratedNode(Node):\n    def __init__(self):\n        super().__init__(\'isaac_accelerated_node\')\n\n        # Initialize CvBridge for image conversion\n        self.bridge = CvBridge()\n\n        # Publishers and subscribers\n        self.image_sub = self.create_subscription(\n            Image,\n            \'/camera/image_raw\',\n            self.image_callback,\n            10\n        )\n\n        self.camera_info_sub = self.create_subscription(\n            CameraInfo,\n            \'/camera/camera_info\',\n            self.camera_info_callback,\n            10\n        )\n\n        self.cmd_vel_pub = self.create_publisher(\n            Twist,\n            \'/cmd_vel\',\n            10\n        )\n\n        self.gpu_usage_pub = self.create_publisher(\n            Float32,\n            \'/performance/gpu_usage\',\n            10\n        )\n\n        # Performance tracking\n        self.processing_times = []\n        self.frame_count = 0\n        self.last_process_time = time.time()\n\n        # Camera info\n        self.camera_matrix = None\n        self.distortion_coeffs = None\n\n        # Timers\n        self.gpu_monitor_timer = self.create_timer(1.0, self.monitor_gpu)\n\n        self.get_logger().info(\'Isaac Accelerated Node initialized\')\n\n    def image_callback(self, msg):\n        """Process incoming image with potential GPU acceleration."""\n        try:\n            # Convert ROS image to OpenCV\n            cv_image = self.bridge.imgmsg_to_cv2(msg, \'bgr8\')\n\n            # Start timing for performance measurement\n            start_time = time.time()\n\n            # Process image (in real implementation, this would use GPU acceleration)\n            processed_image = self.accelerated_image_processing(cv_image)\n\n            # Calculate processing time\n            process_time = time.time() - start_time\n            self.processing_times.append(process_time)\n\n            # Limit the list size to last 100 measurements\n            if len(self.processing_times) > 100:\n                self.processing_times.pop(0)\n\n            # Calculate average processing time\n            avg_time = sum(self.processing_times) / len(self.processing_times) if self.processing_times else 0\n            fps = 1.0 / avg_time if avg_time > 0 else 0\n\n            self.get_logger().info(f\'Processed frame {self.frame_count}, \'\n                                 f\'Avg time: {avg_time*1000:.2f}ms, \'\n                                 f\'FPS: {fps:.2f}\')\n            self.frame_count += 1\n\n        except Exception as e:\n            self.get_logger().error(f\'Error processing image: {str(e)}\')\n\n    def camera_info_callback(self, msg):\n        """Store camera calibration information."""\n        self.camera_matrix = np.array(msg.k).reshape(3, 3)\n        self.distortion_coeffs = np.array(msg.d)\n\n    def accelerated_image_processing(self, image):\n        """\n        Placeholder for GPU-accelerated image processing.\n        In a real Isaac implementation, this would use CUDA kernels\n        or TensorRT for acceleration.\n        """\n        # Simulate some processing (in real implementation, use GPU)\n        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n        blurred = cv2.GaussianBlur(gray, (5, 5), 0)\n        edges = cv2.Canny(blurred, 50, 150)\n\n        return edges\n\n    def monitor_gpu(self):\n        """Monitor GPU usage (placeholder - in real system would query GPU)."""\n        # In a real implementation, this would query actual GPU usage\n        # For now, we\'ll simulate GPU usage\n        import random\n        gpu_usage = Float32()\n        gpu_usage.data = random.uniform(30.0, 90.0)  # Simulated GPU usage %\n        self.gpu_usage_pub.publish(gpu_usage)\n\n\ndef main(args=None):\n    """Main function to run the Isaac accelerated node."""\n    rclpy.init(args=args)\n    node = IsaacAcceleratedNode()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        node.get_logger().info(\'Node interrupted by user\')\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"isaac-specific-launch-file",children:"Isaac-Specific Launch File"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\n\ndef generate_launch_description():\n    # Launch arguments\n    use_sim_time = LaunchConfiguration('use_sim_time', default='false')\n    enable_gpu = LaunchConfiguration('enable_gpu', default='true')\n\n    # Declare launch arguments\n    declare_use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation (Gazebo) clock if true'\n    )\n\n    declare_enable_gpu = DeclareLaunchArgument(\n        'enable_gpu',\n        default_value='true',\n        description='Enable GPU acceleration'\n    )\n\n    # Isaac Visual SLAM node\n    visual_slam_node = Node(\n        package='isaac_ros_visual_slam',\n        executable='visual_slam_node',\n        parameters=[{\n            'enable_slam_3d': False,\n            'use_sim_time': use_sim_time,\n            'enable_gpu_acceleration': enable_gpu\n        }],\n        remappings=[\n            ('/visual_slam/camera/left/image_rect', '/camera/image_raw'),\n            ('/visual_slam/camera/left/camera_info', '/camera/camera_info'),\n        ],\n        output='screen'\n    )\n\n    # Isaac accelerated node\n    accelerated_node = Node(\n        package='isaac_robot_package',\n        executable='accelerated_node',\n        name='accelerated_node',\n        parameters=[\n            {'use_sim_time': use_sim_time}\n        ],\n        output='screen'\n    )\n\n    # Create launch description\n    ld = LaunchDescription()\n\n    # Add launch arguments\n    ld.add_action(declare_use_sim_time)\n    ld.add_action(declare_enable_gpu)\n\n    # Add nodes\n    ld.add_action(visual_slam_node)\n    ld.add_action(accelerated_node)\n\n    return ld\n"})}),"\n",(0,i.jsx)(n.h2,{id:"isaac-specific-configuration",children:"Isaac-Specific Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"accelerated-parameters",children:"Accelerated Parameters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"accelerated_node:\n  ros__parameters:\n    # GPU acceleration settings\n    enable_gpu_acceleration: true\n    gpu_device_id: 0\n    max_gpu_memory: 4096  # MB\n\n    # Processing settings\n    processing_rate: 30.0  # Hz\n    image_width: 640\n    image_height: 480\n\n    # Performance monitoring\n    enable_performance_monitoring: true\n    performance_publish_rate: 10.0  # Hz\n"})}),"\n",(0,i.jsx)(n.h2,{id:"gpu-monitoring-script",children:"GPU Monitoring Script"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# gpu_monitor.sh - Monitor GPU usage for Isaac applications\n\n# Check if nvidia-smi is available\nif ! command -v nvidia-smi &> /dev/null; then\n    echo "nvidia-smi not found. GPU monitoring unavailable."\n    exit 1\nfi\n\n# Monitor GPU usage\necho "Monitoring GPU usage for Isaac applications..."\nwhile true; do\n    # Get GPU utilization percentage\n    gpu_util=$(nvidia-smi --query-gpu=utilization.gpu --format=csv,noheader,nounits)\n    gpu_memory=$(nvidia-smi --query-gpu=memory.used,memory.total --format=csv,noheader,nounits)\n\n    echo "GPU Utilization: ${gpu_util}%"\n    echo "GPU Memory: ${gpu_memory}"\n    echo "---"\n\n    sleep 2\ndone\n'})}),"\n",(0,i.jsx)(n.h2,{id:"usage-instructions",children:"Usage Instructions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Copy the template"}),": Copy this structure to your new Isaac ROS package directory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Replace placeholders"}),": Replace ",(0,i.jsx)(n.code,{children:"isaac_robot_package"})," with your actual package name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update metadata"}),": Modify package.xml with your specific information and Isaac dependencies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Customize code"}),": Modify the example nodes to implement your accelerated functionality"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configure GPU"}),": Update parameters for your specific GPU hardware"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Build and test"}),": Use ",(0,i.jsx)(n.code,{children:"colcon build"})," to build your Isaac package"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"isaac-specific-best-practices",children:"Isaac-Specific Best Practices"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GPU Memory Management"}),": Efficiently allocate and deallocate GPU memory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pipeline Optimization"}),": Minimize data transfers between CPU and GPU"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Processing"}),": Process multiple frames simultaneously when possible"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Asynchronous Execution"}),": Use asynchronous processing where applicable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time Constraints"}),": Ensure deterministic processing times for time-critical applications"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hardware Compatibility"}),": Verify compatibility with supported NVIDIA GPUs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance Monitoring"}),": Continuously monitor GPU utilization and performance"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-isaac-customizations",children:"Common Isaac Customizations"}),"\n",(0,i.jsx)(n.h3,{id:"for-different-applications",children:"For Different Applications"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SLAM"}),": Use Isaac Visual SLAM with GPU acceleration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Perception"}),": Implement accelerated computer vision algorithms"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Navigation"}),": Use GPU-accelerated path planning"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Manipulation"}),": Accelerate grasp planning and control"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"for-different-hardware",children:"For Different Hardware"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Jetson Platforms"}),": Optimize for embedded GPU constraints"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Center GPUs"}),": Leverage high-performance compute capabilities"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Mobile GPUs"}),": Balance performance with power consumption"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>r});var i=a(6540);const s={},t=i.createContext(s);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);