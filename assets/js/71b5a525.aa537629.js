"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[2365],{8187:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>c});var i=a(4848),o=a(8453);const t={title:"Lab 2 - Simulation Exercise",sidebar_position:3,week:5,module:"module-2-gazebo-unity",learningObjectives:["Create a custom Gazebo world file","Design and implement a robot model for simulation","Configure sensors and physics properties","Integrate the robot with ROS 2 navigation stack","Test navigation in simulated environment"],prerequisites:[{"Week 1-5 content":"ROS 2 Foundations and Simulation Basics"},"Gazebo installed and configured","ROS 2 Navigation2 stack installed","Basic understanding of URDF/SDF format"],description:"Hands-on lab to create and test a robot in a custom Gazebo environment"},l="Lab 2: Simulation Exercise",s={id:"modules/module-2-gazebo-unity/lab-2-simulation",title:"Lab 2 - Simulation Exercise",description:"Hands-on lab to create and test a robot in a custom Gazebo environment",source:"@site/docs/modules/module-2-gazebo-unity/lab-2-simulation.md",sourceDirName:"modules/module-2-gazebo-unity",slug:"/modules/module-2-gazebo-unity/lab-2-simulation",permalink:"/Humanoid-AI-Book/docs/modules/module-2-gazebo-unity/lab-2-simulation",draft:!1,unlisted:!1,editUrl:"https://github.com/abdullatifjaffrani/Humanoid-AI-Book/tree/main/docs/modules/module-2-gazebo-unity/lab-2-simulation.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Lab 2 - Simulation Exercise",sidebar_position:3,week:5,module:"module-2-gazebo-unity",learningObjectives:["Create a custom Gazebo world file","Design and implement a robot model for simulation","Configure sensors and physics properties","Integrate the robot with ROS 2 navigation stack","Test navigation in simulated environment"],prerequisites:[{"Week 1-5 content":"ROS 2 Foundations and Simulation Basics"},"Gazebo installed and configured","ROS 2 Navigation2 stack installed","Basic understanding of URDF/SDF format"],description:"Hands-on lab to create and test a robot in a custom Gazebo environment"},sidebar:"tutorialSidebar",previous:{title:"Week 5 - Gazebo Environments",permalink:"/Humanoid-AI-Book/docs/modules/module-2-gazebo-unity/week-5-gazebo-environments"},next:{title:"Module 3: NVIDIA Isaac Platform",permalink:"/Humanoid-AI-Book/docs/modules/module-3-nvidia-isaac"}},r={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Lab Duration",id:"lab-duration",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Scenario: Indoor Robot Navigation",id:"scenario-indoor-robot-navigation",level:2},{value:"Step 1: Create a Workspace for the Simulation Package",id:"step-1-create-a-workspace-for-the-simulation-package",level:2},{value:"Step 2: Create Robot URDF Model",id:"step-2-create-robot-urdf-model",level:2},{value:"Step 3: Create a Custom World File",id:"step-3-create-a-custom-world-file",level:2},{value:"Step 4: Create Launch Files",id:"step-4-create-launch-files",level:2},{value:"Step 5: Create Navigation Configuration",id:"step-5-create-navigation-configuration",level:2},{value:"Step 6: Update Package Configuration",id:"step-6-update-package-configuration",level:2},{value:"Step 7: Build and Run the Simulation",id:"step-7-build-and-run-the-simulation",level:2},{value:"Step 8: Test Navigation",id:"step-8-test-navigation",level:2},{value:"Step 9: Advanced Exercise - Create a Navigation Node",id:"step-9-advanced-exercise---create-a-navigation-node",level:2},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:2},{value:"Expected Output",id:"expected-output",level:2},{value:"Practice Exercises",id:"practice-exercises",level:2},{value:"Exercise 1: Enhance the Robot Model",id:"exercise-1-enhance-the-robot-model",level:3},{value:"Exercise 2: Advanced Navigation Scenario",id:"exercise-2-advanced-navigation-scenario",level:3},{value:"Exercise 3: Sensor Fusion Integration",id:"exercise-3-sensor-fusion-integration",level:3},{value:"Exercise 4: Multi-Robot Simulation",id:"exercise-4-multi-robot-simulation",level:3},{value:"Discussion Questions",id:"discussion-questions",level:3},{value:"Challenge Exercise",id:"challenge-exercise",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"References",id:"references",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"lab-2-simulation-exercise",children:"Lab 2: Simulation Exercise"}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"After completing this lab, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a custom Gazebo world file with specific environment features"}),"\n",(0,i.jsx)(n.li,{children:"Design and implement a robot model suitable for simulation"}),"\n",(0,i.jsx)(n.li,{children:"Configure sensors and physics properties for realistic simulation"}),"\n",(0,i.jsx)(n.li,{children:"Integrate the robot with ROS 2 navigation stack"}),"\n",(0,i.jsx)(n.li,{children:"Test navigation and path planning in simulated environment"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"lab-duration",children:"Lab Duration"}),"\n",(0,i.jsx)(n.p,{children:"Estimated time: 120 minutes"}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ROS 2 Humble Hawksbill installed"}),"\n",(0,i.jsx)(n.li,{children:"Gazebo Garden installed"}),"\n",(0,i.jsx)(n.li,{children:"Navigation2 stack installed"}),"\n",(0,i.jsx)(n.li,{children:"Basic knowledge of Linux command line"}),"\n",(0,i.jsx)(n.li,{children:"Understanding of URDF/SDF format"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"scenario-indoor-robot-navigation",children:"Scenario: Indoor Robot Navigation"}),"\n",(0,i.jsx)(n.p,{children:"You are developing a mobile robot for indoor navigation tasks. In this lab, you'll create a complete simulation environment with a robot model, custom world, and navigation capabilities. The robot should be able to navigate through a simple indoor environment with obstacles."}),"\n",(0,i.jsx)(n.h2,{id:"step-1-create-a-workspace-for-the-simulation-package",children:"Step 1: Create a Workspace for the Simulation Package"}),"\n",(0,i.jsx)(n.p,{children:"First, create a workspace for our simulation package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create workspace directory if not already done\nmkdir -p ~/ros2_simulation_ws/src\ncd ~/ros2_simulation_ws\n\n# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now create a package for our simulation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_simulation_ws/src\nros2 pkg create --build-type ament_cmake simulation_lab --dependencies rclcpp rclpy std_msgs geometry_msgs sensor_msgs nav2_msgs\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-create-robot-urdf-model",children:"Step 2: Create Robot URDF Model"}),"\n",(0,i.jsx)(n.p,{children:"Create the robot description directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/urdf\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create the robot URDF file ",(0,i.jsx)(n.code,{children:"turtlebot3_burger_custom.urdf"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/urdf/turtlebot3_burger_custom.urdf\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="turtlebot3_burger_custom" xmlns:xacro="http://ros.org/wiki/xacro">\n  \x3c!-- Defining the colors used in this robot --\x3e\n  <material name="black">\n    <color rgba="0.0 0.0 0.0 1.0"/>\n  </material>\n\n  <material name="dark">\n    <color rgba="0.3 0.3 0.3 1.0"/>\n  </material>\n\n  <material name="light_black">\n    <color rgba="0.4 0.4 0.4 1.0"/>\n  </material>\n\n  <material name="blue">\n    <color rgba="0.0 0.0 0.8 1.0"/>\n  </material>\n\n  <material name="green">\n    <color rgba="0.0 0.8 0.0 1.0"/>\n  </material>\n\n  <material name="grey">\n    <color rgba="0.5 0.5 0.5 1.0"/>\n  </material>\n\n  <material name="orange">\n    <color rgba="1.0 0.4235 0.0392 1.0"/>\n  </material>\n\n  <material name="brown">\n    <color rgba="0.8706 0.8118 0.7647 1.0"/>\n  </material>\n\n  <material name="red">\n    <color rgba="0.8 0.0 0.0 1.0"/>\n  </material>\n\n  <material name="white">\n    <color rgba="1.0 1.0 1.0 1.0"/>\n  </material>\n\n  \x3c!-- Defining the base of the robot --\x3e\n  <link name="base_link">\n    <visual>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/bases/burger_base.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n      <material name="light_black"/>\n    </visual>\n\n    <collision>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/bases/burger_base.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <mass value="8.2573504e-01"/>\n      <inertia ixx="2.2124416e-03" ixy="0.0" ixz="0.0" iyy="2.1148597e-03" iyz="0.0" izz="2.0000000e-03"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Left wheel --\x3e\n  <link name="wheel_left_link">\n    <visual>\n      <origin xyz="0.0 0.0 0.0" rpy="1.57079632679 0.0 0.0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/wheels/left_tire.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n      <material name="dark"/>\n    </visual>\n\n    <collision>\n      <origin xyz="0.0 0.0 0.0" rpy="1.57079632679 0.0 0.0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/wheels/left_tire.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <mass value="2.6818e-02"/>\n      <inertia ixx="1.3883e-05" ixy="0.0" ixz="0.0" iyy="1.3883e-05" iyz="0.0" izz="2.1415e-05"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Right wheel --\x3e\n  <link name="wheel_right_link">\n    <visual>\n      <origin xyz="0.0 0.0 0.0" rpy="1.57079632679 0.0 0.0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/wheels/right_tire.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n      <material name="dark"/>\n    </visual>\n\n    <collision>\n      <origin xyz="0.0 0.0 0.0" rpy="1.57079632679 0.0 0.0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/wheels/right_tire.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <mass value="2.6818e-02"/>\n      <inertial ixx="1.3883e-05" ixy="0.0" ixz="0.0" iyy="1.3883e-05" iyz="0.0" izz="2.1415e-05"/>\n    </inertial>\n  </link>\n\n  \x3c!-- caster wheel --\x3e\n  <link name="caster_wheel_link">\n    <visual>\n      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/wheels/caster_wheel.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n      <material name="light_black"/>\n    </visual>\n\n    <collision>\n      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>\n      <geometry>\n        <mesh filename="package://turtlebot3_description/meshes/wheels/caster_wheel.stl" scale="0.001 0.001 0.001"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <mass value="0.005"/>\n      <inertia ixx="1.0e-06" ixy="0.0" ixz="0.0" iyy="1.0e-06" iyz="0.0" izz="1.0e-06"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Camera --\x3e\n  <link name="camera_link">\n    <visual>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <geometry>\n        <box size="0.01 0.03 0.03"/>\n      </geometry>\n      <material name="red"/>\n    </visual>\n\n    <collision>\n      <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>\n      <geometry>\n        <box size="0.01 0.03 0.03"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <mass value="0.01"/>\n      <origin xyz="0 0 0" rpy="0 0 0"/>\n      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Joints --\x3e\n  <joint name="base_to_wheel_left_joint" type="continuous">\n    <origin xyz="0.0 0.08 0.028" rpy="0 0 0"/>\n    <parent link="base_link"/>\n    <child link="wheel_left_link"/>\n    <axis xyz="0 1 0"/>\n  </joint>\n\n  <joint name="base_to_wheel_right_joint" type="continuous">\n    <origin xyz="0.0 -0.08 0.028" rpy="0 0 0"/>\n    <parent link="base_link"/>\n    <child link="wheel_right_link"/>\n    <axis xyz="0 1 0"/>\n  </joint>\n\n  <joint name="base_to_caster_wheel_joint" type="fixed">\n    <origin xyz="0.046 0.0 -0.022" rpy="0 0 0"/>\n    <parent link="base_link"/>\n    <child link="caster_wheel_link"/>\n  </joint>\n\n  <joint name="base_to_camera_joint" type="fixed">\n    <origin xyz="0.05 0.0 0.07" rpy="0 0 0"/>\n    <parent link="base_link"/>\n    <child link="camera_link"/>\n  </joint>\n\n  \x3c!-- Gazebo plugins --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Black</material>\n  </gazebo>\n\n  <gazebo reference="wheel_left_link">\n    <mu1>100.0</mu1>\n    <mu2>100.0</mu2>\n    <kp>1000000.0</kp>\n    <kd>100.0</kd>\n    <material>Gazebo/FlatBlack</material>\n  </gazebo>\n\n  <gazebo reference="wheel_right_link">\n    <mu1>100.0</mu1>\n    <mu2>100.0</mu2>\n    <kp>1000000.0</kp>\n    <kd>100.0</kd>\n    <material>Gazebo/FlatBlack</material>\n  </gazebo>\n\n  <gazebo reference="caster_wheel_link">\n    <mu1>100.0</mu1>\n    <mu2>100.0</mu2>\n    <kp>1000000.0</kp>\n    <kd>100.0</kd>\n    <material>Gazebo/White</material>\n  </gazebo>\n\n  <gazebo reference="camera_link">\n    <material>Gazebo/Red</material>\n  </gazebo>\n\n  \x3c!-- Gazebo ROS Control plugin --\x3e\n  <gazebo>\n    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">\n      <robotNamespace>/tb3</robotNamespace>\n      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>\n    </plugin>\n  </gazebo>\n\n  \x3c!-- Camera plugin --\x3e\n  <gazebo reference="camera_link">\n    <sensor type="camera" name="camera1">\n      <update_rate>30.0</update_rate>\n      <camera name="head">\n        <horizontal_fov>1.3962634</horizontal_fov>\n        <image>\n          <width>800</width>\n          <height>800</height>\n          <format>R8G8B8</format>\n        </image>\n        <clip>\n          <near>0.02</near>\n          <far>300</far>\n        </clip>\n      </camera>\n      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n        <frame_name>camera_link</frame_name>\n        <min_depth>0.1</min_depth>\n        <max_depth>100.0</max_depth>\n      </plugin>\n    </sensor>\n  </gazebo>\n</robot>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-create-a-custom-world-file",children:"Step 3: Create a Custom World File"}),"\n",(0,i.jsx)(n.p,{children:"Create a directory for world files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/worlds\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a custom world file ",(0,i.jsx)(n.code,{children:"simple_room.world"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/worlds/simple_room.world\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_room">\n    \x3c!-- Physics engine --\x3e\n    <physics name="1ms" type="ode">\n      <max_step_size>0.001</max_step_size>\n      <real_time_factor>1</real_time_factor>\n      <real_time_update_rate>1000</real_time_update_rate>\n      <gravity>0 0 -9.8</gravity>\n    </physics>\n\n    \x3c!-- Scene configuration --\x3e\n    <scene>\n      <ambient>0.4 0.4 0.4 1</ambient>\n      <background>0.7 0.7 0.7 1</background>\n      <shadows>true</shadows>\n    </scene>\n\n    \x3c!-- Sun light --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n\n    \x3c!-- Ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    \x3c!-- Room walls --\x3e\n    \x3c!-- Wall 1: Front wall --\x3e\n    <model name="wall_1">\n      <pose>0 -3 1 0 0 0</pose>\n      <link name="wall_1_link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.8 0.8 0.8 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Wall 2: Back wall --\x3e\n    <model name="wall_2">\n      <pose>0 3 1 0 0 0</pose>\n      <link name="wall_2_link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.8 0.8 0.8 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Wall 3: Left wall --\x3e\n    <model name="wall_3">\n      <pose>-3 0 1 0 0 1.5707</pose>\n      <link name="wall_3_link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.8 0.8 0.8 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Wall 4: Right wall --\x3e\n    <model name="wall_4">\n      <pose>3 0 1 0 0 1.5707</pose>\n      <link name="wall_4_link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>6 0.1 2</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.8 0.8 0.8 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Furniture: Table --\x3e\n    <model name="table">\n      <pose>1 1 0.4 0 0 0</pose>\n      <link name="table_top">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>1 0.8 0.05</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>1 0.8 0.05</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.6 0.4 0.2 1</ambient>\n            <diffuse>0.6 0.4 0.2 1</diffuse>\n            <specular>0.6 0.4 0.2 1</specular>\n          </material>\n        </visual>\n      </link>\n      <link name="leg_1">\n        <pose>-0.4 -0.35 0.2 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.4 0.2 0.1 1</ambient>\n            <diffuse>0.4 0.2 0.1 1</diffuse>\n            <specular>0.4 0.2 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n      <link name="leg_2">\n        <pose>0.4 -0.35 0.2 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.4 0.2 0.1 1</ambient>\n            <diffuse>0.4 0.2 0.1 1</diffuse>\n            <specular>0.4 0.2 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n      <link name="leg_3">\n        <pose>-0.4 0.35 0.2 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.4 0.2 0.1 1</ambient>\n            <diffuse>0.4 0.2 0.1 1</diffuse>\n            <specular>0.4 0.2 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n      <link name="leg_4">\n        <pose>0.4 0.35 0.2 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.05 0.05 0.35</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.4 0.2 0.1 1</ambient>\n            <diffuse>0.4 0.2 0.1 1</diffuse>\n            <specular>0.4 0.2 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n      <joint name="top_to_leg_1" type="fixed">\n        <parent>table_top</parent>\n        <child>leg_1</child>\n      </joint>\n      <joint name="top_to_leg_2" type="fixed">\n        <parent>table_top</parent>\n        <child>leg_2</child>\n      </joint>\n      <joint name="top_to_leg_3" type="fixed">\n        <parent>table_top</parent>\n        <child>leg_3</child>\n      </joint>\n      <joint name="top_to_leg_4" type="fixed">\n        <parent>table_top</parent>\n        <child>leg_4</child>\n      </joint>\n    </model>\n\n    \x3c!-- Obstacle --\x3e\n    <model name="obstacle">\n      <pose>-1 -1 0.25 0 0 0</pose>\n      <link name="obstacle_link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.5 0.5 0.5</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.5 0.5 0.5</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>1 0 0 1</ambient>\n            <diffuse>1 0 0 1</diffuse>\n            <specular>1 0 0 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Robot spawn location --\x3e\n    <model name="turtlebot3_burger" static="false">\n      <include>\n        <uri>model://turtlebot3_burger</uri>\n      </include>\n      <pose>0 0 0.01 0 0 0</pose>\n    </model>\n  </world>\n</sdf>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-create-launch-files",children:"Step 4: Create Launch Files"}),"\n",(0,i.jsx)(n.p,{children:"Create a launch directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/launch\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a launch file for the simulation ",(0,i.jsx)(n.code,{children:"simulation.launch.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/launch/simulation.launch.py\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.conditions import IfCondition\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\n\ndef generate_launch_description():\n    # Launch arguments\n    use_sim_time = LaunchConfiguration('use_sim_time', default='true')\n    world = LaunchConfiguration('world', default='simple_room.world')\n\n    # Package names\n    pkg_gazebo_ros = FindPackageShare('gazebo_ros')\n    pkg_simulation_lab = FindPackageShare('simulation_lab')\n\n    # Declare launch arguments\n    declare_use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='true',\n        description='Use simulation (Gazebo) clock if true'\n    )\n\n    declare_world_cmd = DeclareLaunchArgument(\n        'world',\n        default_value='simple_room.world',\n        description='Choose one of the world files from `/simulation_lab/worlds`'\n    )\n\n    # Include Gazebo launch file\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([\n            PathJoinSubstitution([\n                FindPackageShare('gazebo_ros'),\n                'launch',\n                'gazebo.launch.py'\n            ])\n        ]),\n        launch_arguments={\n            'world': PathJoinSubstitution([\n                FindPackageShare('simulation_lab'),\n                'worlds',\n                world\n            ]),\n            'use_sim_time': use_sim_time,\n        }.items()\n    )\n\n    # Robot state publisher node\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        name='robot_state_publisher',\n        output='screen',\n        parameters=[{\n            'use_sim_time': use_sim_time,\n            'robot_description': open(\n                os.path.join(\n                    os.path.dirname(__file__),\n                    '..',\n                    'urdf',\n                    'turtlebot3_burger_custom.urdf'\n                )\n            ).read()\n        }]\n    )\n\n    # Spawn entity node to place robot in Gazebo\n    spawn_entity = Node(\n        package='gazebo_ros',\n        executable='spawn_entity.py',\n        arguments=[\n            '-topic', 'robot_description',\n            '-entity', 'turtlebot3_burger_custom',\n            '-x', '0.0',\n            '-y', '0.0',\n            '-z', '0.01'\n        ],\n        output='screen'\n    )\n\n    # Create launch description\n    ld = LaunchDescription()\n\n    # Add launch arguments\n    ld.add_action(declare_use_sim_time)\n    ld.add_action(declare_world_cmd)\n\n    # Add nodes and launch descriptions\n    ld.add_action(gazebo)\n    ld.add_action(robot_state_publisher)\n    ld.add_action(spawn_entity)\n\n    return ld\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-5-create-navigation-configuration",children:"Step 5: Create Navigation Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Create a config directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/config\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a basic navigation configuration ",(0,i.jsx)(n.code,{children:"nav2_params.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/config/nav2_params.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'amcl:\n  ros__parameters:\n    use_sim_time: True\n    alpha1: 0.2\n    alpha2: 0.2\n    alpha3: 0.2\n    alpha4: 0.2\n    alpha5: 0.2\n    base_frame_id: "base_footprint"\n    beam_span: 0.0628318530718\n    beta: 0.0174532925199\n    first_map_only: False\n    lambda_short: 0.1\n    likelihood_max_dist: 2.0\n    max_beams: 60\n    max_particles: 2000\n    min_particles: 500\n    odom_frame_id: "odom"\n    pf_err: 0.05\n    pf_z: 0.99\n    recovery_alpha_fast: 0.0\n    recovery_alpha_slow: 0.0\n    resample_interval: 1\n    robot_model_type: "nav2_amcl::DifferentialMotionModel"\n    save_pose_rate: 0.5\n    scan_topic: scan\n    sigma_hit: 0.2\n    tf_broadcast: True\n    transform_tolerance: 1.0\n    update_min_a: 0.2\n    update_min_d: 0.2\n    z_hit: 0.5\n    z_max: 0.05\n    z_rand: 0.5\n    z_short: 0.05\n    map_topic: map\n    initial_pose:\n      x: 0.0\n      y: 0.0\n      z: 0.0\n      yaw: 0.0\n\namcl_map_client:\n  ros__parameters:\n    use_sim_time: True\n\namcl_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\nbt_navigator:\n  ros__parameters:\n    use_sim_time: True\n    global_frame: map\n    robot_base_frame: base_link\n    odom_topic: /odom\n    bt_loop_duration: 10\n    default_server_timeout: 20\n    enable_groot_monitoring: True\n    groot_zmq_publisher_port: 1666\n    groot_zmq_server_port: 1667\n    navigate_through_poses: False\n    navigate_to_pose: True\n    action_server_result_timeout: 900.0\n    simple_goal_checker:\n      plugin: "nav2_navfn_planner::SimpleGoalChecker"\n      xy_goal_tolerance: 0.25\n      yaw_goal_tolerance: 0.25\n      stateful: True\n    goal_blackboard_visibility:\n      plugin: "nav2_behavior_tree::GoalBlackboardPlugin"\n    progress_checker:\n      plugin: "nav2_navfn_planner::SimpleProgressChecker"\n      required_movement_radius: 0.5\n      movement_time_allowance: 10.0\n    behavior_tree:\n      plugin: "nav2_behavior_tree::NavigateToPoseTolerance"\n      tree_filename: "navigate_to_pose_w_replanning_and_recovery.xml"\n\nbt_navigator_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\ncontroller_server:\n  ros__parameters:\n    use_sim_time: True\n    controller_frequency: 20.0\n    min_x_velocity_threshold: 0.001\n    min_y_velocity_threshold: 0.5\n    min_theta_velocity_threshold: 0.001\n    progress_checker_plugin: "progress_checker"\n    goal_checker_plugin: "goal_checker"\n    controller_plugins: ["FollowPath"]\n\n    # Progress checker parameters\n    progress_checker:\n      plugin: "nav2_controller::SimpleProgressChecker"\n      required_movement_radius: 0.5\n      movement_time_allowance: 10.0\n\n    # Goal checker parameters\n    goal_checker:\n      plugin: "nav2_controller::SimpleGoalChecker"\n      xy_goal_tolerance: 0.25\n      yaw_goal_tolerance: 0.25\n      stateful: True\n\n    # Controller parameters\n    FollowPath:\n      plugin: "nav2_rotation_shim::RotationShimController"\n      subscription_topic: "local_plan"\n      rotation:\n        plugin: "nav2_controller::SimplePurePursuit"\n        velocity_topic: "cmd_vel"\n        lookahead_dist: 0.6\n        transform_tolerance: 0.1\n        velocity_scaling_smooth: 1.0\n        velocity_scaling_min_abs: 0.0\n        velocity_scaling_error_abs: 0.0\n        velocity_scaling_error_sq: 0.0\n        velocity_scaling_factor: 1.0\n        min_approach_linear_velocity: 0.05\n        approach_velocity_scaling_factor: 1.0\n\ncontroller_server_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\nlocal_costmap:\n  local_costmap:\n    ros__parameters:\n      update_frequency: 5.0\n      publish_frequency: 2.0\n      global_frame: odom\n      robot_base_frame: base_link\n      use_sim_time: True\n      rolling_window: true\n      width: 3\n      height: 3\n      resolution: 0.05\n      robot_radius: 0.1\n      plugins: ["voxel_layer", "inflation_layer"]\n      inflation_layer:\n        plugin: "nav2_costmap_2d::InflationLayer"\n        cost_scaling_factor: 3.0\n        inflation_radius: 0.55\n      voxel_layer:\n        plugin: "nav2_costmap_2d::VoxelLayer"\n        enabled: True\n        publish_voxel_map: False\n        origin_z: 0.0\n        z_resolution: 0.05\n        z_voxels: 16\n        max_obstacle_height: 2.0\n        mark_threshold: 0\n        observation_sources: scan\n        scan:\n          topic: /scan\n          max_obstacle_height: 2.0\n          clearing: True\n          marking: True\n          data_type: "LaserScan"\n          raytrace_max_range: 3.0\n          raytrace_min_range: 0.0\n          obstacle_max_range: 2.5\n          obstacle_min_range: 0.0\n      always_send_full_costmap: True\n  local_costmap_client:\n    ros__parameters:\n      use_sim_time: True\n  local_costmap_rclcpp_node:\n    ros__parameters:\n      use_sim_time: True\n\nglobal_costmap:\n  global_costmap:\n    ros__parameters:\n      update_frequency: 1.0\n      publish_frequency: 1.0\n      global_frame: map\n      robot_base_frame: base_link\n      use_sim_time: True\n      robot_radius: 0.1\n      resolution: 0.05\n      track_unknown_space: true\n      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]\n      obstacle_layer:\n        plugin: "nav2_costmap_2d::ObstacleLayer"\n        enabled: True\n        observation_sources: scan\n        scan:\n          topic: /scan\n          max_obstacle_height: 2.0\n          clearing: True\n          marking: True\n          data_type: "LaserScan"\n          raytrace_max_range: 3.0\n          raytrace_min_range: 0.0\n          obstacle_max_range: 2.5\n          obstacle_min_range: 0.0\n      static_layer:\n        plugin: "nav2_costmap_2d::StaticLayer"\n        map_subscribe_transient_local: True\n      inflation_layer:\n        plugin: "nav2_costmap_2d::InflationLayer"\n        cost_scaling_factor: 3.0\n        inflation_radius: 0.55\n      always_send_full_costmap: True\n  global_costmap_client:\n    ros__parameters:\n      use_sim_time: True\n  global_costmap_rclcpp_node:\n    ros__parameters:\n      use_sim_time: True\n\nmap_server:\n  ros__parameters:\n    use_sim_time: True\n    yaml_filename: "map.yaml"\n\nmap_saver:\n  ros__parameters:\n    use_sim_time: True\n    save_map_timeout: 5.0\n    free_thresh_default: 0.25\n    occupied_thresh_default: 0.65\n\nplanner_server:\n  ros__parameters:\n    expected_planner_frequency: 20.0\n    use_sim_time: True\n    planner_plugins: ["GridBased"]\n    GridBased:\n      plugin: "nav2_navfn_planner::NavfnPlanner"\n      tolerance: 0.5\n      use_astar: false\n      allow_unknown: true\n\nplanner_server_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\nsmoother_server:\n  ros__parameters:\n    use_sim_time: True\n    smoother_plugins: ["simple_smoother"]\n    simple_smoother:\n      plugin: "nav2_smoother::SimpleSmoother"\n      tolerance: 1.0e-10\n      max_its: 1000\n      do_refinement: True\n\nbehavior_server:\n  ros__parameters:\n    costmap_topic: local_costmap/costmap_raw\n    footprint_topic: local_costmap/published_footprint\n    cycle_frequency: 10.0\n    behavior_plugins: ["spin", "backup", "drive_on_heading", "assisted_teleop"]\n    spin:\n      plugin: "nav2_behaviors::Spin"\n      spin_dist: 1.57\n    backup:\n      plugin: "nav2_behaviors::BackUp"\n      backup_dist: 0.15\n      backup_speed: 0.025\n    drive_on_heading:\n      plugin: "nav2_behaviors::DriveOnHeading"\n      drive_on_heading_distance: 0.5\n    assisted_teleop:\n      plugin: "nav2_behaviors::AssistedTeleop"\n      min_vel_theta: 0.4\n\nvelocity_smoother:\n  ros__parameters:\n    use_sim_time: True\n    smoothing_frequency: 20.0\n    scale_velocities: False\n    velocity_timeout: 1.0\n    filter_size: 5\n    velocity_scaling: 1.0\n    max_velocity: [1.0, 1.0, 1.0]\n    min_velocity: [-1.0, -1.0, -1.0]\n    max_accel: [2.5, 2.5, 3.2]\n    max_decel: [-2.5, -2.5, -3.2]\n\nwaypoint_follower:\n  ros__parameters:\n    use_sim_time: True\n    loop_rate: 20\n    stop_on_failure: False\n    waypoint_task_executor_plugin: "wait_at_waypoint"\n    wait_at_waypoint:\n      plugin: "nav2_waypoint_follower::WaitAtWaypoint"\n      enabled: True\n      waypoint_pause_duration: 200\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-6-update-package-configuration",children:"Step 6: Update Package Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Update the package.xml file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/ros2_simulation_ws/src/simulation_lab/package.xml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>simulation_lab</name>\n  <version>0.0.0</version>\n  <description>Simulation lab package for Gazebo environments</description>\n  <maintainer email="your.email@example.com">Your Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <buildtool_depend>ament_cmake</buildtool_depend>\n\n  <depend>rclcpp</depend>\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>geometry_msgs</depend>\n  <depend>sensor_msgs</depend>\n  <depend>nav2_msgs</depend>\n  <depend>gazebo_ros_pkgs</depend>\n  <depend>robot_state_publisher</depend>\n  <depend>xacro</depend>\n\n  <test_depend>ament_lint_auto</test_depend>\n  <test_depend>ament_lint_common</test_depend>\n\n  <export>\n    <build_type>ament_cmake</build_type>\n  </export>\n</package>\n'})}),"\n",(0,i.jsx)(n.p,{children:"Update the CMakeLists.txt file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/ros2_simulation_ws/src/simulation_lab/CMakeLists.txt\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:'cmake_minimum_required(VERSION 3.8)\nproject(simulation_lab)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\n# Find dependencies\nfind_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(rclpy REQUIRED)\nfind_package(std_msgs REQUIRED)\nfind_package(geometry_msgs REQUIRED)\nfind_package(sensor_msgs REQUIRED)\nfind_package(nav2_msgs REQUIRED)\nfind_package(gazebo_ros_pkgs REQUIRED)\nfind_package(robot_state_publisher REQUIRED)\n\n# Install launch files\ninstall(DIRECTORY\n  launch\n  worlds\n  urdf\n  config\n  DESTINATION share/${PROJECT_NAME}\n)\n\nif(BUILD_TESTING)\n  find_package(ament_lint_auto REQUIRED)\n  set(ament_cmake_copyright_FOUND TRUE)\n  set(ament_cmake_flake8_FOUND TRUE)\n  set(ament_cmake_pep257_FOUND TRUE)\n  ament_lint_auto_find_test_dependencies()\nendif()\n\nament_package()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-7-build-and-run-the-simulation",children:"Step 7: Build and Run the Simulation"}),"\n",(0,i.jsx)(n.p,{children:"Build the package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_simulation_ws\nsource /opt/ros/humble/setup.bash\ncolcon build --packages-select simulation_lab\n"})}),"\n",(0,i.jsx)(n.p,{children:"Source the workspace:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run the simulation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 launch simulation_lab simulation.launch.py\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-8-test-navigation",children:"Step 8: Test Navigation"}),"\n",(0,i.jsx)(n.p,{children:"In a new terminal, source the workspace and send navigation goals:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_simulation_ws\nsource install/setup.bash\n\n# Send a simple navigation goal\nros2 run nav2_test nav2_simple_commander --x 2.0 --y 1.0 --theta 0.0\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or use RViz2 for visualization and navigation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# In another terminal\ncd ~/ros2_simulation_ws\nsource install/setup.bash\nros2 run rviz2 rviz2\n"})}),"\n",(0,i.jsx)(n.p,{children:"In RViz2:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:'Set the fixed frame to "map"'}),"\n",(0,i.jsx)(n.li,{children:"Add the robot model display"}),"\n",(0,i.jsx)(n.li,{children:'Use the "Navigation 2" panel to set goals'}),"\n",(0,i.jsx)(n.li,{children:"Visualize the costmaps and path planning"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-9-advanced-exercise---create-a-navigation-node",children:"Step 9: Advanced Exercise - Create a Navigation Node"}),"\n",(0,i.jsx)(n.p,{children:"Create a simple navigation node to programmatically send goals:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/navigation\nnano ~/ros2_simulation_ws/src/simulation_lab/simulation_lab/navigation/simple_navigator.py\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\n\nfrom geometry_msgs.msg import PoseStamped\nfrom nav2_msgs.action import NavigateToPose\n\n\nclass SimpleNavigator(Node):\n\n    def __init__(self):\n        super().__init__('simple_navigator')\n        self._action_client = ActionClient(\n            self,\n            NavigateToPose,\n            'navigate_to_pose'\n        )\n\n    def send_goal(self, x, y, theta):\n        goal_msg = NavigateToPose.Goal()\n        goal_msg.pose.header.frame_id = 'map'\n        goal_msg.pose.header.stamp = self.get_clock().now().to_msg()\n        goal_msg.pose.pose.position.x = x\n        goal_msg.pose.pose.position.y = y\n        goal_msg.pose.pose.position.z = 0.0\n\n        # Convert theta (yaw) to quaternion\n        import math\n        from tf_transformations import quaternion_from_euler\n        quat = quaternion_from_euler(0, 0, theta)\n        goal_msg.pose.pose.orientation.x = quat[0]\n        goal_msg.pose.pose.orientation.y = quat[1]\n        goal_msg.pose.pose.orientation.z = quat[2]\n        goal_msg.pose.pose.orientation.w = quat[3]\n\n        self._action_client.wait_for_server()\n        self._send_goal_future = self._action_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback\n        )\n\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n    def goal_response_callback(self, future):\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info('Goal rejected :(')\n            return\n\n        self.get_logger().info('Goal accepted :)')\n\n        self._get_result_future = goal_handle.get_result_async()\n        self._get_result_future.add_done_callback(self.get_result_callback)\n\n    def feedback_callback(self, feedback_msg):\n        feedback = feedback_msg.feedback\n        self.get_logger().info(f'Received feedback: {feedback}')\n\n    def get_result_callback(self, future):\n        result = future.result().result\n        self.get_logger().info(f'Result: {result}')\n        rclpy.shutdown()\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    simple_navigator = SimpleNavigator()\n\n    # Send a navigation goal to move to (2.0, 1.0, 0.0)\n    simple_navigator.send_goal(2.0, 1.0, 0.0)\n\n    rclpy.spin(simple_navigator)\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Robot not spawning"}),": Check that URDF file is properly formatted and all mesh files exist"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Navigation not working"}),": Verify that all required navigation nodes are running"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance issues"}),": Reduce physics update rates or simplify collision geometries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"TF issues"}),": Check that all coordinate frames are properly connected"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sensors not publishing"}),": Verify that sensor plugins are correctly configured"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,i.jsx)(n.p,{children:"When running the simulation, you should see:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Gazebo window with the custom room environment"}),"\n",(0,i.jsx)(n.li,{children:"Robot model spawned at the initial position"}),"\n",(0,i.jsx)(n.li,{children:"RViz2 visualization showing robot pose and sensor data"}),"\n",(0,i.jsx)(n.li,{children:"Navigation goals being executed successfully"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"practice-exercises",children:"Practice Exercises"}),"\n",(0,i.jsx)(n.h3,{id:"exercise-1-enhance-the-robot-model",children:"Exercise 1: Enhance the Robot Model"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Add a LIDAR sensor to your robot model in the URDF file."}),"\n",(0,i.jsx)(n.li,{children:"Configure the LIDAR plugin with appropriate parameters (range, resolution, update rate)."}),"\n",(0,i.jsx)(n.li,{children:"Verify that the LIDAR topic is publishing data in ROS 2."}),"\n",(0,i.jsx)(n.li,{children:"Test obstacle detection by placing objects in the simulation environment."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-2-advanced-navigation-scenario",children:"Exercise 2: Advanced Navigation Scenario"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Create a more complex world file with multiple rooms and narrow passages."}),"\n",(0,i.jsx)(n.li,{children:"Add dynamic obstacles (moving objects) to test real-time navigation capabilities."}),"\n",(0,i.jsx)(n.li,{children:"Implement a navigation node that sends a sequence of waypoints to the robot."}),"\n",(0,i.jsx)(n.li,{children:"Test the robot's ability to navigate around dynamic obstacles."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-3-sensor-fusion-integration",children:"Exercise 3: Sensor Fusion Integration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Add multiple sensor types to your robot (camera, LIDAR, IMU)."}),"\n",(0,i.jsx)(n.li,{children:"Create a sensor fusion node that combines data from different sensors."}),"\n",(0,i.jsx)(n.li,{children:"Use the fused sensor data to improve navigation accuracy."}),"\n",(0,i.jsx)(n.li,{children:"Compare navigation performance with and without sensor fusion."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-4-multi-robot-simulation",children:"Exercise 4: Multi-Robot Simulation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Modify your world file to include multiple robot models."}),"\n",(0,i.jsx)(n.li,{children:"Set up proper namespaces for each robot to avoid topic conflicts."}),"\n",(0,i.jsx)(n.li,{children:"Implement coordination between robots (e.g., formation control or task sharing)."}),"\n",(0,i.jsx)(n.li,{children:"Test collision avoidance between multiple robots in the same environment."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"discussion-questions",children:"Discussion Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"What are the main challenges in making simulation results transferable to real-world robotics applications?"}),"\n",(0,i.jsx)(n.li,{children:"How do sensor models in simulation differ from real sensors, and how does this affect algorithm development?"}),"\n",(0,i.jsx)(n.li,{children:"What strategies can be used to validate that your simulation environment accurately represents the real world?"}),"\n",(0,i.jsx)(n.li,{children:"How do computational constraints affect the complexity of simulation environments?"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"challenge-exercise",children:"Challenge Exercise"}),"\n",(0,i.jsx)(n.p,{children:"Design and implement a complete warehouse automation scenario:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a detailed warehouse environment with aisles, shelves, and loading zones"}),"\n",(0,i.jsx)(n.li,{children:"Implement multiple robots with different capabilities (transport, inspection, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Develop a task allocation system that assigns tasks to appropriate robots"}),"\n",(0,i.jsx)(n.li,{children:"Create a simulation that demonstrates goods transport from one end of the warehouse to another"}),"\n",(0,i.jsx)(n.li,{children:"Include failure scenarios (robot breakdowns, blocked paths) and recovery mechanisms"}),"\n",(0,i.jsx)(n.li,{children:"Document the performance metrics and optimization strategies used"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You've created a complete simulation environment with custom world and robot model"}),"\n",(0,i.jsx)(n.li,{children:"You've integrated the robot with ROS 2 Navigation2 stack"}),"\n",(0,i.jsx)(n.li,{children:"You've learned to configure sensors and physics properties for realistic simulation"}),"\n",(0,i.jsx)(n.li,{children:"You've tested navigation capabilities in a controlled environment"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"/Humanoid-AI-Book/docs/references/simulation-bibliography",children:"Simulation Bibliography"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>s});var i=a(6540);const o={},t=i.createContext(o);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);